# HTTP

HTTP — HyperText Transfer Protocol — широко распространённый протокол передачи данных, изначально предназначенный для передачи гипертекстовых документов (то есть документов, которые могут содержать ссылки, позволяющие организовать переход к другим документам).
Является протоколом прикладного уровня - верхнего (7-го) уровня сетевой модели [OSI], обеспечивает взаимодействие сети и пользователя, разрешающим приложениям пользователя иметь доступ к сетевым службам, таким, как обработчик запросов к базам данных, доступ к файлам, пересылке электронной почты. Также отвечает за передачу служебной информации, предоставляет приложениям информацию об ошибках и формирует запросы к [уровню представления][7lev].  Версия протокола, HTTP 1.1, описана в спецификации [RFC 2616]. [Черновики] версии HTTP 2 были опубликованы в феврале 2015 года

## Алгоритм передачи данных

Протокол HTTP предполагает использование клиент-серверной структуры передачи данных. 

**Клиенты** — конечные потребители услуг сервера (отправка запроса).
**Серверы** являются основными поставщиками услуг хранения и обработки информации (обработка запросов).
**Прокси** (посредники) - посредники во взаимодействии между срверами и клиентами.

- **Клиент** формирует запрос и отправляет его на *сервер*.
- **Cервер** обрабатывает запрос, формирует ответ и передаёт его обратно *клиенту*.
- После этого *клиент* может продолжить отправлять другие запросы, которые будут обработаны аналогичным образом.

## Структура протокола
Каждое HTTP-сообщение состоит из трёх частей, которые передаются в указанном порядке:

- **Стартовая строка** (англ. Starting line) — определяет тип сообщения;
- **Заголовки** (англ. Headers) — характеризуют тело сообщения, параметры передачи и прочие сведения;
- **Тело сообщения** (англ. Message Body) — непосредственно данные сообщения. Обязательно должно отделяться от заголовков пустой строкой.



### Стартовая строка

Стартовая (начальная) строка запроса для HTTP 1.1 составляется по следующей схеме:
```
Метод URI HTTP/Версия
```
#### Метод
Представляет собой последовательность из любых символов, кроме управляющих и разделителей, и определяет операцию, которую нужно осуществить с указанным ресурсом. Обычно метод представляет собой короткое английское слово, записанное заглавными буквами. Название метода чувствительно к регистру.

Спецификация HTTP 1.1 не ограничивает количество разных методов, которые могут быть использованы, однако в целях соответствия общим стандартам и сохранения совместимости с максимально широким спектром программного обеспечения как правило используются лишь некоторые, наиболее стандартные методы, смысл которых однозначно раскрыт в спецификации протокола.

##### Список наиболее частых методов
+ **GET**: получить доступ к существующему ресурсу. В URL перечислена вся необходимая информация, чтобы сервер смог найти и вернуть в качестве ответа искомый ресурс.
+ **HEAD**: аналогичен GET. Разница в том, что при данном виде запроса не передаётся сообщение. Сервер получает только заголовки. Используется, к примеру, для того чтобы определить, был ли изменён ресурс.
+ **POST**: используется для создания нового ресурса. POST запрос обычно содержит в себе всю нужную информацию для создания нового ресурса.
+ **PUT**: обновить текущий ресурс. PUT запрос содержит обновляемые данные.
+ **PATCH**: аналогично PUT, но применяется только к фрагменту ресурса.
+ **DELETE**: удаляет указанный ресурс.
+ **OPTIONS**: используется для определения возможностей сервера, его параметров и конфигурации для конкретного ресурса.
+ **TRACE**: во время передачи запрос проходит через множество точек доступа и прокси серверов, каждый из которых вносит свою информацию: IP, DNS. С помощью данного метода, можно увидеть всю промежуточную информацию.
+ **CONNECT**: преобразует соединение запроса в прозрачный TCP/IP-туннель, обычно чтобы содействовать установлению защищённого SSL-соединения через нешифрованный прокси.

#### URI 
URI (Uniform Resource Identifier, унифицированный идентификатор ресурса) — путь до конкретного ресурса (например, документа), над которым необходимо осуществить операцию (например, в случае использования метода GET подразумевается получение ресурса). Некоторые запросы могут не относиться к какому-либо ресурсу, в этом случае вместо URI в стартовую строку может быть добавлен символ «*». Например, это может быть запрос, который относится к самому веб-серверу, а не какому-либо конкретному ресурсу. В этом случае стартовая строка может выглядеть так:
```
OPTIONS * HTTP/1.1
```
#### Версия
Определяет, в соответствии с какой версией стандарта HTTP составлен запрос. Указывается как два числа, разделённых точкой (например 1.1).

### Заголовки
Заголовки HTTP (англ. HTTP Headers) — это строки в HTTP-сообщении, содержащие разделённую двоеточием пару параметр-значение. Формат заголовков соответствует общему формату заголовков текстовых сетевых сообщений ARPA (см. RFC 822). Заголовки должны отделяться от тела сообщения хотя бы одной пустой строкой.

Все заголовки разделяются на четыре основных группы:
1. General Headers («Основные заголовки» или «Общие заголовки») — могут включаться в любое сообщение клиента и сервера.
Вот несколько видов заголовков, которые используются как в запросах, так и в ответах:

general-header = Cache-Control

               | Connection
               | Date
               | Pragma
               | Trailer
               | Transfer-Encoding
               | Upgrade
               | Via
               | Warning


2. Request Headers («Заголовки запроса») — используются только в запросах клиента;
3. Response Headers («Заголовки ответа») — только для ответов от сервера;
4. Entity Headers («Заголовки сущности») — сопровождают каждую сущность сообщения.
В заголовках сущностей передаётся мета-информация контента:

entity-header  = Allow

               | Content-Encoding
               | Content-Language
               | Content-Length
               | Content-Location
               | Content-MD5
               | Content-Range
               | Content-Type
               | Expires
               | Last-Modified
Все заголовки с префиксом Content- предоставляют информацию о структуре, кодировке и размере тела сообщения.
Заголовок Expires содержит время и дату истечения сущности. Значение “never expires” означает время + 1 код с текущего момента. Last-Modified содержит время и дату последнего изменения сущности.
С помощью данных заголовков, можно задать нужную для ваших задач информацию.

 
### Тело сообщения




[Черновики]: <https://tools.ietf.org/html/draft-ietf-httpbis-http2-17>
[OSI]: <https://www.wikiwand.com/en/OSI_model>
[RFC 2616]: <https://tools.ietf.org/html/rfc2616>
[7lev]:
<https://www.wikiwand.com/ru/%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB%D1%8B_%D0%BF%D1%80%D0%B8%D0%BA%D0%BB%D0%B0%D0%B4%D0%BD%D0%BE%D0%B3%D0%BE_%D1%83%D1%80%D0%BE%D0%B2%D0%BD%D1%8F>
